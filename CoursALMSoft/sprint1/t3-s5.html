<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html lang="en-US">  <head>    <meta http-equiv="content-type" content="text/html; charset=utf-8">    <title>Workshop: Programming Basics</title>    <meta name="CHANGEDBY" content="Pr. Olivier Gruber">    <link rel="stylesheet" href="../style.css" type="text/css">    <script src="../common.js"></script>    <script src="../quizz.js"></script>    <link rel="stylesheet" href="../highlight.js/styles/default.css">    <script src="../highlight.js/highlight.pack.js"></script>    <script>hljs.initHighlightingOnLoad();</script>  </head>  <body onload="shellOnLoad()">    <script>      function shellOnLoad() {        multiLang();        /*hljs.initHighlightingOnLoad(); */        _quizzes = new Array();        parseQuizzes();      }      </script>    <div id="outer-container">      <div id="header">        <div id="logo"> <img src="../logo_uga.png" alt="Université Grenoble-Alpes"            height="100"            border="0">          <img src="../logo_reseau_polytech.gif" alt="Polytech" height="80" border="0">        </div>        <div id="top-links"> <a href="../index.html">Home</a> </div>      </div>      <div>        <h1>Bases du langage C et assembleur<br>        </h1>        <h2>Task3 -- Notion de pointeur<br>        </h2>        <h3>Step5 --&nbsp; <br>        </h3>        <p>Passez dans le répertoire task3s5C.</p>        <p>Nous allons aborder ici une notion importante mais délicate: le <span            style="font-weight: bold;">pointeur</span>.</p>        <p>Cette notion abstraite dans les langages de haut niveau est en fait          très simple lors de sa traduction en assembleur. Nous allons          comprendre comment.<br>        </p>        <p>Voici un programme C manipulant un pointeur:<span style="font-family: monospace;"><br>          </span></p>        <pre><code class="c">        <span style="font-family: monospace;">#include &lt;stdio.h&gt;                    int a;          int b;          int* pointeur;                    int main()          {          &nbsp;&nbsp;&nbsp;pointeur= &amp;a;          &nbsp;&nbsp;&nbsp;a=10;          &nbsp;&nbsp;&nbsp;b=*pointeur;                    &nbsp;&nbsp;&nbsp;printf("Valeur de a: %d\n",a);          &nbsp;&nbsp;&nbsp;printf("Valeur de b: %d\n",b);          &nbsp;&nbsp;&nbsp;printf("Valeur de l'adresse de a: %d\n",&amp;a);          &nbsp;&nbsp;&nbsp;printf("Valeur du pointeur sur a: %d\n",pointeur);          &nbsp;&nbsp;&nbsp;printf("Valeur de l'adresse du pointeur p:%d\n",&amp;pointeur);          }                  </span></code></pre>        <p>Plusieurs choses à comprendre dans ce programme:</p>        <ul>          <li><span style="font-weight: bold; font-style: italic;">int* pointeur</span>            déclare une variable de nom pointeur de type non pas entière mais            pointeur d'entier, c'est l'étoile qui permet de le spécifier.<br>          </li>          <li>Le caractère <span style="font-weight: bold;">&amp;</span> placé            devant le nom d'une variable permet de spécifier non pas le contenu            de la variable mais l'<span style="font-weight: bold;">adresse</span>            de la variable.<br>          </li>          <li>Ainsi un <b>pointeur</b> sur une variable n'est rien d'autre que            l'<b>adresse</b> de la variable.</li>          <li>Une variable de type pointeur contient donc une adresse (4            octets). <br>          </li>          <li>Une variable de type pointeur possède aussi sa propre adresse.</li>          <li>Si on veut accéder au contenu de la variable <i>pointée</i> par            un pointeur, on utilise le caractère * devant le nom de la variable            "pointeur"; ainsi <span style="font-weight: bold; font-style: italic;">b=              *pointeur</span>, affecte à b la valeur de la variable pointée par            <i>pointeur</i>, donc en fait le contenu des cases dont l'adresse            est dans <i>pointeur</i>.</li>          <li>On peut dessiner des boîtes pour s'y retrouver:</li>        </ul>        <img src="./figpointeur.jpg" alt="" style="width: 356px; height: 173px;"><br>        <ul>        </ul>        <p><br>        </p>        <p>Compilez ce programme par <i><b>make pointeur</b></i>.</p>        <p>Vous obtenez des warnings concernant des printf lorsque l'on passe          une adresse au lieu d'une variable entière en deuxième paramètre.          Pourtant une adresse ou un entier est stocké en mémoire sur 4 octets.        </p>        <p>Il est possible en C de <b>forcer</b> le <b>type</b> d'une variable          pour éviter ces <i>warnings</i> et de montrer au compilateur que l'on          sait ce que l'on fait !</p>        <p>Par exemple:&nbsp; </p>        <p style="margin: 0.0px 0.0px 0.0px 0.0px; background-color: #ffffff"><font            style="font: 11.0px Menlo; color: #000000"            face="Menlo"            size="3"            color="#000000"><span              class="Apple-converted-space">&nbsp;
              &nbsp; </span>printf(</font><font style="font: 11.0px Menlo; color: #d12f1b"            face="Menlo"            size="3"            color="#d12f1b">"Valeur
            de l'adresse de a: %d\n"</font><font style="font: 11.0px Menlo; color: #000000"            face="Menlo"            size="3"            color="#000000">,(int)&amp;a);</font></p>        <p><i><b>(int)&amp;a</b></i> force le type de <b><i>&amp;a</i></b> (une          adresse) en un entier.</p>        <ul>          <li>Essayez ces forçages de type.</li>          <li>Exécutez le programme. </li>          <li>Pourquoi b contient il la même valeur que <i>a</i> ?</li>          <li>Quelle est l'adresse de <i>a</i> ? Que contient la variable <i>pointeur</i>            ?</li>        </ul>        <ul>          <li>Compilez afin d'obtenir <i><b>pointeur.s</b></i></li>          <li>Exécutez sous gdb <b><i>pointeur.s</i></b></li>          <li>Donnez les instructions assembleurs qui permettent les            affectations </li>          <ul>            <li>pointeur= &amp;a;</li>            <li>a= 10;</li>            <li>b= *pointeur;</li>          </ul>          <li>Retrouvez sous gdb les adresses des variables a, b et pointeur.</li>          <li>Comparez avec les valeurs données à l'écran lors de l'exécution du            programme pointeur. Pourquoi ce ne sont pas les même ?</li>          <li>Rajoutez au programme C une instruction permettant de modifier la            variable <i>a</i> sans donner son nom (en utilisant la variable            pointeur).</li>          <li>Essayez.</li>          <li><span style="font-family: Arial,Serif;">Vérifiez auprès d'un autre              étudiant ou d'un enseignant que vos réponses aux questions              précédentes sont justes.</span></li>        </ul>        <br>        <br>        <br>        <br>        <br>        <br>        <p> </p>        <div id="footer"> © IM2AG          <div id="bottom-links" style="float: right;"> <a href="../index.html">Home</a>          </div>        </div>      </div>    </div>  </body></html>