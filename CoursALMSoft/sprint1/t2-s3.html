<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html lang="en-US">  <head>    <meta http-equiv="content-type" content="text/html; charset=utf-8">    <title>Workshop: Programming Basics</title>    <meta name="CHANGEDBY" content="Pr. Olivier Gruber">    <link rel="stylesheet" href="../style.css" type="text/css">    <script src="../common.js"></script>    <link rel="stylesheet" href="../highlight.js/styles/default.css">    <script src="../highlight.js/highlight.pack.js"></script>    <script>hljs.initHighlightingOnLoad();</script>  </head>  <body onload="shellOnLoad()">    <script>      function shellOnLoad() {        multiLang();        /*hljs.initHighlightingOnLoad(); */      }      </script>    <div id="outer-container">      <div id="header">        <div id="logo"> <img src="../logo_uga.png" alt="Université Grenoble-Alpes"            border="0"            height="100">          <img src="../logo_reseau_polytech.gif" alt="Polytech" border="0" height="80">        </div>        <div id="top-links"> <a href="../index.html">Home</a> </div>      </div>      <div id="inner-container">        <h1>Assembly Programming Basics</h1>        <h2>Task2 -- Une première fonction</h2>        <h3>Step3 -- Analyse d'un programme C compilé<br>        </h3>        <br>        <br>        <h3>Passage de paramètre par registre</h3>        <p> Vous avez précédemment écrit vos propres fonctions en language          d'assemblage ARM. Nous allons maintenant observer à quoi ressemble un          programme C, contenant des fonctions, et compilé en assembleur ARM par          GCC.<br>          Ce qui nous intéresse ici est de voir comment sont définies les          fonctions, comment les paramètres sont passés à une fonction et          comment la valeur de retour est récupérée par l'appelant. </p>        <p> Placez vous dans le répertoire <b>task2s3C</b>. <br>          Observez les fichiers <b><i>main.c</i></b> et <b><i>mul.c</i></b>          pour comprendre ce que fait le programme, puis compilez le avec la          commande <i><b>make</b></i>. </p>        <p> Ouvrez les deux fichiers <b><i>main.s</i></b> et <b><i>mul.s</i></b>.<br>          Observez le corps de la fonction <i>main</i>, en particulier, les          appels à la fonction <i>mul</i>.<br>          <b>&nbsp;&nbsp;&nbsp; Dans quels registres sont passés les paramètres            à la fonction mul ?</b> </p>        <p> Observez maintenant le corps de la fonction <i>mul.</i><br>          <b>&nbsp;&nbsp;&nbsp; Dans quel registre le résultat de la fonction            est-il passé ?</b> </p>        <p> <b>&nbsp;&nbsp;&nbsp; Quelles conséquences cela peut avoir ?</b> </p>        <h3>Passage de paramètre autrement...</h3>        <p> Modifiez la fonction <b><i>mul</i></b> pour qu'elle prenne en          paramètre 6 entiers, et retourne le produit de l'ensemble de ces          entiers. Recompilez le programme et observez de nouveau les fichiers <i>main.s</i>          et <i>div.s</i><br>          <b>Quelles observations pouvez vous faire ?</b><br>          En particulier, quels sont les paramètres passés dans des registres,          et lesquels semblent être passés d'une autre manière ? </p>        <p> A savoir, par convention, le compilateur utilise les registres <i><b>r0</b></i>          à <i><b>r3</b></i> pour passer les premiers paramètres à une          fonction. Au delà de quatre paramètres, le compilateur utilise la pile          pour stocker les paramètres suivant.<br>          Pas de panique, nous verrons plus tard à quoi sert la pile et comment          l'utiliser. </p>        <div id="footer"> © UFR IM2AG          <div id="bottom-links" style="float: right;"> <a href="../index.html">home</a>          </div>        </div>      </div>    </div>  </body></html>